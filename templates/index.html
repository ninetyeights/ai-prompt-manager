{% extends 'modal.html' %}

{% block cssext %}
    <style>
        .swiper-child {
            height: 400px;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="swiper swiper-parent">
        <div class="swiper-wrapper">
            {% for soft in software %}
                {% if soft.images.all.count > 0 %}
                    <div class="swiper-slide">
                        <div class="swiper swiper-child">
                            <div class="swiper-wrapper">
                                {% for image in soft.images.all %}
                                    <div class="swiper-slide">
                                        <img src="{{ image.image.url }}" alt=""
                                             class="w-full h-full object-cover object-center rounded-md"/>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="swiper-pagination"></div>
                        </div>

                        <div class="flex items-center mt-4">
                            {% if "krea" in soft.name or "Krea" in soft.name or "KREA" in soft.name %}
                                <svg role="img" width="48" height="48" viewBox="0 0 24 24" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.34057 1.26646C10.1061 1.14218 11.6638 2.37142 11.8911 4.06824C12.1069 5.68015 11.0037 7.23915 9.34608 7.60419C8.93062 7.69566 8.46886 7.67023 8.02919 7.72601C6.95925 7.86191 6.04308 8.30843 5.2807 9.06558L5.27279 9.06966L5.26385 9.0689L5.2568 9.06354L5.25394 9.05533C5.25366 9.04931 5.25521 9.04398 5.25861 9.03933C5.26343 9.03249 5.26583 9.02497 5.26583 9.01677C5.25535 7.76661 5.2521 6.253 5.25606 4.47593C5.25946 2.79675 6.58613 1.38951 8.34057 1.26646Z"
                                          fill="#000"></path>
                                    <path d="M8.5264 15.3045C6.27918 15.2869 4.66832 13.0758 5.44996 11.0041C5.88114 9.86055 6.9457 9.0267 8.20737 8.89545C8.59097 8.85566 9.05188 8.86591 9.42189 8.79701C11.322 8.44386 12.7897 6.99068 13.0867 5.14047C13.1525 4.7299 13.1181 4.24058 13.215 3.805C13.6636 1.78908 15.9736 0.657869 17.9137 1.56924C18.9252 2.04502 19.6032 2.94326 19.771 4.01623C19.8055 4.23634 19.8167 4.50896 19.8045 4.83408C19.5845 10.6755 14.5956 15.3529 8.5264 15.3045Z"
                                          fill="#000"></path>
                                    <path d="M11.3567 16.2337C11.3465 16.229 11.3396 16.2222 11.3359 16.2132C11.3352 16.2114 11.3349 16.2094 11.335 16.2075C11.3351 16.2056 11.3356 16.2037 11.3366 16.202C11.3375 16.2003 11.3388 16.1988 11.3403 16.1976C11.3419 16.1964 11.3437 16.1956 11.3457 16.1951C13.6512 15.6674 15.6487 14.6058 17.338 13.0102C17.3683 12.9815 17.3959 12.9837 17.4208 13.0168C17.6918 13.3736 17.9748 13.7571 18.2016 14.1234C19.1336 15.6279 19.6617 17.2574 19.7857 19.0121C19.8106 19.3659 19.8184 19.6392 19.8091 19.832C19.7254 21.537 18.2985 22.9126 16.4998 22.9229C14.9072 22.9315 13.5071 21.845 13.2046 20.325C13.1333 19.9653 13.1553 19.4669 13.0946 19.0867C12.9071 17.9169 12.3355 16.9702 11.3797 16.2464C11.3754 16.2428 11.3678 16.2386 11.3567 16.2337Z"
                                          fill="#000"></path>
                                    <path d="M7.98752 22.874C6.63495 22.6386 5.5466 21.5882 5.30446 20.2814C5.27132 20.1026 5.25476 19.8301 5.25476 19.464C5.25447 18.0227 5.25419 16.5813 5.25391 15.1397C5.25391 15.1255 5.25929 15.1232 5.27005 15.1327C6.15449 15.919 7.08397 16.3993 8.29806 16.4793C8.29919 16.4795 8.40794 16.4831 8.62431 16.4899C10.205 16.5404 11.544 17.5764 11.8528 19.0813C12.3099 21.3064 10.2955 23.2756 7.98752 22.874Z"
                                          fill="#000"></path>
                                </svg>
                            {% elif soft.thumbnail %}
                                <img src="{{ soft.thumbnail.url }}" alt="" class="w-12 h-full mr-2">
                            {% endif %}
                            <h2 class="text-2xl text-nowrap">{{ soft.name }}</h2>
                            {% if soft.description %}
                                <div class="text-xl ml-2">{{ soft.description }}</div>{% endif %}
                        </div>

                        <div class="mt-2 mb-4">
                            {% if soft.pros %}
                                <div class="text-lg ml-14 text-green-600">优点：{{ soft.pros }}</div>{% endif %}
                            {% if soft.cons %}
                                <div class="text-lg ml-14 text-red-600">缺点：{{ soft.cons }}</div>{% endif %}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div>

    {% for item in data %}
        {% if item.items %}
            <section
                    class="border border-white rounded-md mb-4 py-2 px-4 lg:px-4 lg:py-4 bg-white hover:shadow-md transition-all ease-in-out duration-300">
                <h2 class="block antialiased tracking-normal font-sans text-2xl font-semibold leading-snug !mb-2 text-primary">
                    {{ item.label }}<span class="ml-2 text-base">{{ item.items.count }}张</span><span
                        class="text-sm ml-2">{{ item.date }}</span>
                </h2>
                <div class="grid grid-cols-4 gap-4">
                    {% for inner in item.items %}
                        {% include "inner.html" with inner=inner %}
                    {% endfor %}
                </div>
            </section>
        {% endif %}
    {% endfor %}
{% endblock %}

{% block jsext %}
<script>
    window.addEventListener('DOMContentLoaded', function () {
        const swiperParent = new Swiper('.swiper-parent', {
            slidesPerView: 1,
            spaceBetween: 0,
            allowTouchMove: false,

            navigation: {
                prevEl: '.swiper-button-prev',
                nextEl: '.swiper-button-next'
            }
        });

        const swiperChild = new Swiper('.swiper-child', {
            slidesPerView: 4,
            centeredSlides: false,
            spaceBetween: 30,
            freeMode: true,

            pagination: {
                el: '.swiper-pagination',
            },
        });
    })
</script>
{% endblock %}
